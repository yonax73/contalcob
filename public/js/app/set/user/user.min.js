function init(){swicthActiveLink(document.getElementById("collector-nav"));Location.Content.landline.hidden(!0);Location.Content.extensionLandline.hidden(!0);Location.Content.address.hidden(!0);Location.Content.neighborhood.hidden(!0);Location.Content.city.hidden(!0);Location.Content.country.hidden(!0);initApp();initFormValidation();Login.setLoginTypeId(Login.COLLECTOR);User.getId()>0&&(Login.Content.password.hidden(!0),Login.Content.confirmPassword.hidden(!0),User.Toolbar.hidden(!1),$("#user-frm").bootstrapValidator("enableFieldValidators","password",!1).bootstrapValidator("enableFieldValidators","confirmPassword",!1),load())}function load(){Pace.track(function(){$.ajax({type:"GET",url:"/load-user?id="+User.getId(),success:function(n){try{fillData(JSON.parse(n))}catch(t){console.error(t);alert(n)}},error:function(n){alert(n.statusText)},timeout:6e4})})}function fillData(n){var i=n.location,t=n.login;User.title(n.name);User.setFullName(n.name);User.setId(n.id);Location.MobilePhone.setNumber(i.mobilePhone.number);Location.MobilePhone.setId(i.mobilePhone.id);Login.setId(t.id);Login.setUser(t.user);Login.setEmail(t.email)}function initFormValidation(){$("#user-frm").bootstrapValidator({feedbackIcons:faIcon,fields:{userFullName:{validators:{notEmpty:{message:"El nombre del recaudador requerido."}}},mobilePhone:{validators:{notEmpty:{message:"El n&uacute;mero del celular es requerido"}}},emailLogin:{validators:{notEmpty:{message:"El correo el&eacute;ctronico es requerido"},emailAddress:{message:"Ingrese un correo el&eacute;ctronico valido"}}},userLogin:{validators:{notEmpty:{message:"El nombre de usuario es requerido"}}},password:{validators:{notEmpty:{message:"La contrase&ntilde;a es requerida"},identical:{field:"confirmPassword",message:"La contrase&ntilde;a y la confirmaci&oacute;n no son iguales"}}},confirmPassword:{validators:{notEmpty:{message:"La confirmaci&oacute;n de la contrase&ntilde;a es requerida"},identical:{field:"password",message:"La contrase&ntilde;a y la confirmaci&oacute;n no son iguales"}}}}}).on("success.field.bv",function(n,t){var i=t.element.parents(".form-group");i.removeClass("has-success")}).on("success.form.bv",function(n){n.preventDefault();var t=$(n.target);disabledControls(!0);Pace.track(function(){$.ajax({url:t.attr("action"),type:"POST",data:t.serialize(),success:function(n){disabledControls(!1);try{fillData(JSON.parse(n));$("#user-frm").bootstrapValidator("enableFieldValidators","password",!1).bootstrapValidator("enableFieldValidators","confirmPassword",!1);Login.Content.password.hidden(!0);Login.Content.confirmPassword.hidden(!0);User.Toolbar.hidden(!1);Notification.success()}catch(t){console.log(t);disabledControls(!1);alert(n)}},error:function(n){disabledControls(!1);alert(n.responseText)}})})})}function disabledControls(n){document.getElementById("save-user-btn").disabled=n}function newUser(){User.clear();User.title("Crear recaudador");User.Toolbar.hidden(!0);Login.clear();Login.setLoginTypeId(Login.COLLECTOR);Location.clear();Login.Content.password.hidden(!1);Login.Content.confirmPassword.hidden(!1);$("#user-frm").bootstrapValidator("enableFieldValidators","password",!0).bootstrapValidator("enableFieldValidators","confirmPassword",!0)}function userZones(){datas=[];Zone.Search.data=[];Zone.Search.userId(User.getId());Zone.Search.excludeUserId(0);Pace.track(function(){$.ajax({type:"POST",url:"/search-zones",data:Zone.Search.serialize(),success:function(n){try{fillUserZones(JSON.parse(n))}catch(t){console.error(t);alert(n)}},error:function(n){alert(n.statusText)},timeout:6e4})})}function fillUserZones(n){var u,f,i,t,r;if(n)if(u=n.zones?n.zones.length:0,u>0)for(f=document.getElementById("user-zones"),f.innerHTML="",i=0;i<u;i++)t=n.zones[i],r={size:"col-lg-3 col-md-4 col-sm-12",cardId:"user-zones-"+t.id,id:t.id,title:t.name,contentBody:t.description},datas[r.id]=r,cardUserZones(f,r);else userWithZones(!1);Modal.Form.action().classList.add("hidden");Modal.Form.title("Zonas por recaudador");Modal.Form.show()}function zonesSearch(){Zone.Search.data=[];Zone.Search.userId(0);Zone.Search.excludeUserId(User.getId());Pace.track(function(){$.ajax({type:"POST",url:"/search-zones",data:Zone.Search.serialize(),success:function(n){try{fillZonesSearch(JSON.parse(n))}catch(t){console.error(t);alert(n)}},error:function(n){alert(n.statusText)},timeout:6e4})})}function fillZonesSearch(n){var u,f,i,t,r;if(n)if(u=n.zones?n.zones.length:0,u>0)for(f=document.getElementById("search-zone"),f.innerHTML="",i=0;i<u;i++)t=n.zones[i],r={size:"col-lg-3 col-md-4 col-sm-12",cardId:"zones-search-"+t.id,id:t.id,title:t.name,contentBody:t.description},datas[r.id]=r,cardBusinessZones(f,r);else document.getElementById("business-without-zones").classList.remove("hidden")}function cardUserZones(n,t){var i='<div id="'+t.cardId+'" class="'+t.size+'"><div class="panel"><div class="panel-heading"><div class="panel-control"><a href="#" class="text-danger" onclick="toBusinessZone('+t.id+')" ><i class="fa fa-trash"><\/i><\/a><\/div><h3 class="panel-title"><i class="fa fa-map-marker"><\/i>&nbsp;&nbsp;'+t.title+"<\/h3><\/div><\/div><\/div>";n.innerHTML+=i}function cardBusinessZones(n,t){var i='<div id="'+t.cardId+'" class="'+t.size+'"><div class="panel"><div class="panel-heading"><div class="panel-control"><a href="#" class="text-success" onclick="toUserZone('+t.id+')" ><i class="fa fa-plus-circle"><\/i><\/a><\/div><h3 class="panel-title"><i class="fa fa-map-marker"><\/i>&nbsp;&nbsp;'+t.title+"<\/h3><\/div><\/div><\/div>";n.innerHTML+=i}function toBusinessZone(n){var t=datas[n],i=document.getElementById("search-zone");Pace.track(function(){$.ajax({type:"GET",url:"/remove-user-zone?userId="+User.getId()+"&zoneId="+t.id,success:function(n){try{n==RESPONSE_OK?($("#"+t.cardId).remove(),cardBusinessZones(i,t)):alert(n)}catch(r){console.error(r);alert(n)}},error:function(n){alert(n.statusText)},timeout:6e4})})}function toUserZone(n){var t=datas[n],i=document.getElementById("user-zones");Pace.track(function(){$.ajax({type:"GET",url:"/add-user-zone?userId="+User.getId()+"&zoneId="+t.id,success:function(n){try{n==RESPONSE_OK?($("#"+t.cardId).remove(),cardUserZones(i,t),userWithZones(!0)):alert(n)}catch(r){console.error(r);alert(n)}},error:function(n){alert(n.statusText)},timeout:6e4})})}function userWithZones(n){var t=document.getElementById("user-without-zones");n?t.classList.contains("hidden")||t.classList.add("hidden"):t.classList.contains("hidden")&&t.classList.remove("hidden")}window.onload=function(){init()};var datas={};
//# sourceMappingURL=user.min.js.map
